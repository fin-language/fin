// AUTOGENERATED FILE. Do not modify this file manually, it will be overwritten.
// finlang generated this file for C# `app.MainController` type.
// Source file: `LightsApp/app/MainController.cs` (relative to C# solution).


#include "app_MainController.h"
#include <string.h>



static void _set_leds(app_MainController * self);



void app_MainController_ctor(app_MainController * self, app_ITimeProvider * time_provider, app_ILed * led1, app_ILed * led2)
{
    memset(self, 0, sizeof(*self));
    app_StopWatch_ctor(&self->_stopwatch, time_provider);
    self->_led1 = led1;
    self->_led2 = led2;

    self->_state = true;
    _set_leds(self);
}

void app_MainController_update(app_MainController * self)
{
    if (app_StopWatch_get_elapsed_ms(&self->_stopwatch) >= 1000)
    {
        app_StopWatch_reset(&self->_stopwatch);
        self->_state = !self->_state;
        _set_leds(self);
    }
}

static void _set_leds(app_MainController * self)
{
    app_ILed_set_state(self->_led1, self->_state);
    app_ILed_set_state(self->_led2, !self->_state);
}
